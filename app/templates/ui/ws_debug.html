{% extends "ui/base.html" %}
{% block title %}WS Debug{% endblock %}

{% block content %}
<h2>WebSocket Debug</h2>
<p>ì„œë²„ì—ì„œ ì˜ëŠ” ì´ë²¤íŠ¸ê°€ ì•„ë˜ ë¡œê·¸ë¡œ ì‹¤ì‹œê°„ ì°í™ë‹ˆë‹¤.</p>
<pre id="log" style="background:#111;color:#0f0;padding:10px;border-radius:8px;height:400px;overflow:auto;"></pre>

<script>
  const logEl = document.getElementById("log");
  const log = (msg) => {
    logEl.textContent += msg + "\n";
    logEl.scrollTop = logEl.scrollHeight;
  };

  const ws = new WebSocket("ws://localhost:8000/ws/debug");

  ws.onopen = () => log("âœ… WS connected");
  ws.onmessage = (event) => {
    try {
      const data = JSON.parse(event.data);
      log("ğŸ“© " + JSON.stringify(data, null, 2));
    } catch {
      log("ğŸ“© " + event.data);
    }
  };
  ws.onclose = () => log("âŒ WS closed");
</script>
{% endblock %}
