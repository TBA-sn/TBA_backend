{% extends "ui/base.html" %}
{% block title %}모델별 통계{% endblock %}

{% block content %}
<h2>모델별 리뷰 통계</h2>

<form method="get" action="" style="display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:12px 0;">
  <div style="display:flex;flex-direction:column;gap:4px;min-width:160px;">
    <label>from (YYYY-MM-DD)</label>
    <input type="date" name="from" value="{{ from or '' }}" />
  </div>
  <div style="display:flex;flex-direction:column;gap:4px;min-width:160px;">
    <label>to (YYYY-MM-DD)</label>
    <input type="date" name="to" value="{{ to or '' }}" />
  </div>
  <div style="margin-top:20px;">
    <input type="submit" value="필터 적용" />
  </div>
</form>

<table>
  <thead>
    <tr>
      <th>model</th>
      <th>review_count</th>
      <th>avg_total</th>
      <th>avg_bug</th>
      <th>avg_maintainability</th>
      <th>avg_style</th>
      <th>avg_security</th>
    </tr>
  </thead>
  <tbody>
    {% if items and items|length > 0 %}
      {% for m in items %}
        <tr>
          <td>{{ m.model or '-' }}</td>
          <td>{{ m.review_count }}</td>
          <td>{{ '%.1f'|format(m.avg_total) if m.avg_total is not none else '-' }}</td>
          <td>{{ '%.1f'|format(m.avg_bug) if m.avg_bug is not none else '-' }}</td>
          <td>{{ '%.1f'|format(m.avg_maintainability) if m.avg_maintainability is not none else '-' }}</td>
          <td>{{ '%.1f'|format(m.avg_style) if m.avg_style is not none else '-' }}</td>
          <td>{{ '%.1f'|format(m.avg_security) if m.avg_security is not none else '-' }}</td>
        </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="7" style="text-align:center;">데이터가 없습니다.</td>
      </tr>
    {% endif %}
  </tbody>
</table>
{% endblock %}
