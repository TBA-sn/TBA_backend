{% extends "ui/base.html" %}
{% block title %}리뷰 상세{% endblock %}

{% block content %}
<h2>리뷰 #{{ rec.id }}</h2>

<p>
  <b>user</b>: {{ rec.meta.github_id or '' }}
  | <b>model</b>: {{ rec.meta.model or '' }}
  | <b>trigger</b>: {{ rec.meta.trigger or '' }}
  | <b>language</b>: {{ rec.meta.language or 'N/A' }}
  | <b>audit</b>: {{ rec.meta.audit }}
</p>

{# ───────────────── 코드 원문 ───────────────── #}
<h3>코드</h3>
{% if rec.code %}
  <pre style="background:#f5f5f5;border:1px solid #ddd;padding:8px;overflow:auto;">
<code>{{ rec.code }}</code>
  </pre>
{% else %}
  <p style="color:#888;">저장된 코드가 없습니다 (store_code=0 인 경우).</p>
{% endif %}

<h3>요약</h3>
<p>{{ rec.summary or '요약 없음' }}</p>

<h3>점수</h3>
<ul>
  <li>quality_score: {{ rec.quality_score }}</li>
</ul>

<h3>카테고리별 코멘트</h3>
<table>
  <thead>
    <tr>
      <th>category</th>
      <th>score</th>
      <th>comment</th>
    </tr>
  </thead>
  <tbody>
    {% if rec.categories %}
      {% for row in rec.categories %}
        <tr>
          <td>{{ row.category }}</td>
          <td>{{ row.score }}</td>
          <td>{{ row.comment or '-' }}</td>
        </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="3" style="text-align:center;color:#888;">
          카테고리별 점수가 없습니다.
        </td>
      </tr>
    {% endif %}
  </tbody>
</table>

{% endblock %}
