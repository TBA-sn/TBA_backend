{% extends "ui/base.html" %}
{% block title %}리뷰 상세{% endblock %}

{% block content %}
<h2>리뷰 #{{ rec.id }}</h2>

<p>
  <b>user_id</b>: {{ rec.user_id }}
  | <b>model</b>: {{ rec.model }}
  | <b>trigger</b>: {{ rec.trigger }}
  | <b>status</b>: {{ rec.status }}
  | <b>created_at</b>: {{ rec.created_at }}
</p>

<h3>요약</h3>
<p>{{ rec.summary or '요약 없음' }}</p>

<h3>점수</h3>
<ul>
  <li>global_score: {{ rec.scores.global_score if rec.scores else '-' }}</li>
  <li>model_score: {{ rec.scores.model_score if rec.scores else '-' }}</li>
  <li>efficiency_index: {{ rec.scores.efficiency_index if rec.scores else '-' }}</li>
</ul>

<h3>카테고리</h3>
<table>
  <thead>
    <tr><th>name</th><th>score</th><th>comment</th></tr>
  </thead>
  <tbody>
    {% for c in rec.categories or [] %}
      <tr>
        <td>{{ c.name }}</td>
        <td>{{ c.score }}</td>
        <td>{{ c.comment }}</td>
      </tr>
    {% else %}
      <tr><td colspan="3" style="text-align:center;">카테고리 없음</td></tr>
    {% endfor %}
  </tbody>
</table>

<h3>메타 정보</h3>
<ul>
  <li>request_hash: <code>{{ rec.request_hash }}</code></li>
  <li>code_fingerprint: <code>{{ rec.code_fingerprint }}</code></li>
  {% if rec.result_ref %}
    <li>result_ref: {{ rec.result_ref }}</li>
  {% endif %}
  {% if rec.error_message %}
    <li style="color:#c00;">error_message: {{ rec.error_message }}</li>
  {% endif %}
</ul>

<p style="margin-top:16px;">
  <a href="/ui/review/{{ rec.id }}/logs">액션 로그 보기</a>
</p>
{% endblock %}
