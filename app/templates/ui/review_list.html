{% extends "ui/base.html" %}
{% block title %}ë¦¬ë·° ëª©ë¡{% endblock %}

{% block content %}
<h2>ë¦¬ë·° ëª©ë¡</h2>

<form method="get" action="" style="display:flex;gap:8px;align-items:center;margin:12px 0;">
  <input name="user_id" placeholder="filter by user_id" value="{{ user_id or '' }}" />
  <input type="submit" value="ê²€ìƒ‰" />
</form>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>github_id</th>
      <th>model</th>
      <th>language</th>
      <th>quality_score</th>
      <th>audit</th>
      <th>code</th>  {# ğŸ”¥ ì½”ë“œ ë¯¸ë¦¬ë³´ê¸° ì»¬ëŸ¼ ì¶”ê°€ #}
      <th></th>
    </tr>
  </thead>
  <tbody>
  {% for r in rows %}
    <tr>
      <td>{{ r.id }}</td>
      <td>
        {% if r.meta %}
          {{ r.meta.github_id or '-' }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if r.meta %}
          {{ r.meta.model or 'unknown' }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if r.meta %}
          {{ r.meta.language or '-' }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>{{ r.quality_score }}</td>
      <td>
        {% if r.meta and r.meta.audit %}
          {{ r.meta.audit }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if r.code %}
          <pre style="max-height:80px;overflow:auto;white-space:pre-wrap;font-size:12px;margin:0;">
{{ r.code }}
          </pre>
        {% else %}
          <span style="color:#888;">ì½”ë“œ ì—†ìŒ</span>
        {% endif %}
      </td>
      <td><a class="button" href="/ui/review/{{ r.id }}">ë³´ê¸°</a></td>
    </tr>
  {% else %}
    <tr><td colspan="8" style="text-align:center;">ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
