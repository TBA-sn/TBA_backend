{% extends "ui/base.html" %}
{% block title %}리뷰 목록{% endblock %}

{% block content %}
<h2>리뷰 목록</h2>

<form method="get" action="" style="display:flex;gap:8px;align-items:center;margin:12px 0;">
  <input name="user_id" placeholder="filter by user_id" value="{{ user_id or '' }}" />
  <input type="submit" value="검색" />
</form>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>github_id</th>
      <th>model</th>
      <th>language</th>
      <th>quality_score</th>
      <th>audit</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  {% for r in rows %}
    <tr>
      <td>{{ r.id }}</td>
      <td>
        {% if r.meta %}
          {{ r.meta.github_id or '-' }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if r.meta %}
          {{ r.meta.model or 'unknown' }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if r.meta %}
          {{ r.meta.language or '-' }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>{{ r.quality_score }}</td>
      <td>
  {% if r.meta and r.meta.audit %}
    {{ r.meta.audit }}
  {% else %}
    -
  {% endif %}
</td>
      <td><a class="button" href="/ui/review/{{ r.id }}">보기</a></td>
    </tr>
  {% else %}
    <tr><td colspan="7" style="text-align:center;">리뷰가 없습니다</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
