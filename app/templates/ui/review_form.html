{% extends "ui/base.html" %}
{% block title %}ë¦¬ë·° ì‘ì„±{% endblock %}

{% block content %}
<h2>ë¦¬ë·° ìš”ì²­</h2>

{% if current_user_login %}
  <p style="font-size:14px;margin-bottom:8px;">
    í˜„ì¬ ë¡œê·¸ì¸: <b>{{ current_user_login }}</b> (id: {{ current_user_id }})
  </p>

  {# ğŸ”¥ ì›ë³¸ ì½”ë“œ ì €ì¥ ì„¤ì • í† ê¸€ #}
  <div style="font-size:13px;margin-bottom:12px;padding:8px 10px;border:1px solid #ddd;border-radius:4px;">
    <div style="margin-bottom:6px;">
      ì›ë³¸ ì½”ë“œ ì €ì¥ ì„¤ì •:
      {% if current_user_store_code %}
        <b style="color:green;">ì €ì¥í•¨</b>
      {% else %}
        <b style="color:#c00;">ì €ì¥ ì•ˆ í•¨</b>
      {% endif %}
    </div>

    <form method="post" action="/ui/user/store-code" style="display:inline;">
      {# í˜„ì¬ ê°’ì˜ ë°˜ëŒ€ë¡œ ë³´ë‚´ì„œ í† ê¸€ #}
      <input
        type="hidden"
        name="store_code"
        value="{% if current_user_store_code %}0{% else %}1{% endif %}"
      />
      <button type="submit">
        {% if current_user_store_code %}
          ì›ë³¸ ì½”ë“œ ì €ì¥ ë„ê¸°
        {% else %}
          ì›ë³¸ ì½”ë“œ ì €ì¥ ì¼œê¸°
        {% endif %}
      </button>
    </form>
  </div>
{% endif %}

<form method="post" action="/ui/review">
  <div class="row">
    <div class="col">
      <label>user_id</label>
      {% if current_user_id %}
        <input
          type="number"
          name="user_id"
          placeholder="user id"
          value="{{ current_user_id or '' }}"
          readonly
        />
      {% else %}
        <input name="user_id" type="number" placeholder="1" required />
      {% endif %}
    </div>
    <div class="col">
      <label>model_id</label>
      <input name="model_id" value="starcoder-15b" required />
    </div>
    <div class="col">
      <label>language</label>
      <input name="language" value="python" required />
    </div>
    <div class="col">
      <label>trigger</label>
      <input name="trigger" value="manual" required />
    </div>
  </div>
  <div class="row">
    <div class="col" style="flex-basis:100%">
      <label>code</label>
      <textarea name="code" rows="10" placeholder="def add(a,b): return a+b" required></textarea>
    </div>
  </div>
  <div style="margin-top:12px;">
    <input type="submit" value="ìš”ì²­ ë³´ë‚´ê¸°" />
  </div>
</form>
{% endblock %}
